# Acoustique des salles


Tout environnement, sollicitÃ© par un Ã©vÃ¨nement sonore, produit une rÃ©ponse acoustique. Cette rÃ©ponse acoustique est appelÃ©e rÃ©verbÃ©ration. Elle est caractÃ©ristique dâ€™un lieu et peut, dans certains cas, Ãªtre une alliÃ©e prÃ©cieuse dans notre travail. Dans dâ€™autres, elle est source de problÃ¨mes et complexifie grandement notre travail dâ€™Ã©coute analytique.

## GÃ©nÃ©ralitÃ©s

### La rÃ©verbÃ©ration

L'acoustique d'une salle est gÃ©nÃ©ralement dÃ©crite en deux temps : le temps des premiÃ¨res rÃ©flexions et le temps du champ diffus.

```{r, echo = FALSE, fig.align='center', fig.cap = "SchÃ©ma d'une rÃ©ponse impulsionnelle de rÃ©verbÃ©ration."}
knitr::include_graphics(rep("_resources/drawings/reverb.svg"))
```

Les premiÃ¨res rÃ©flexions sont les premiers rebonds dâ€™une onde sonore sur les parois dâ€™une salle et sont caractÃ©ristiques de la signature acoustique du lieu. Ces rebonds reviennent Ã  lâ€™auditeur avec un certain temps. Ce retard se nomme souvent Â«Â prÃ©-dÃ©laiÂ Â» dans les moteurs de rÃ©verbÃ©ration artificiels. Ce prÃ©dÃ©lai est fonction de deux paramÃ¨tresÂ :

+ la taille de la piÃ¨ceÂ ; plus la piÃ¨ce est petite, plus les premiÃ¨res rÃ©flexions reviendront Ã  lâ€™auditeur rapidement.
+ les positions de la source sonore et de lâ€™auditeurÂ ; plus lâ€™auditeur est proche de la source, plus les premiÃ¨res rÃ©flexions arriveront aprÃ¨s le son direct, plus lâ€™auditeur est loin de la source, plus les premiÃ¨res rÃ©flexions arriveront en mÃªme temps que le son direct.

Lorsque les premiÃ¨res rÃ©flexions elles-mÃªmes auront rebondi plusieurs fois sur les parois du lieu, le phÃ©nomÃ¨ne dâ€™Ã©cho des premiÃ¨res rÃ©flexions va se muer en champs diffus, par nature plus dense. La longueur du champ diffus se mesure grÃ¢ce au RT60. Cette mÃ©thode de mesure propose de regarder le temps que met la rÃ©verbÃ©ration Ã  perdre 60Â dB. Ce temps permettra ensuite de donner une longueur de rÃ©verbÃ©ration.

### Calcul du temps de rÃ©verbÃ©ration

L'Ã©quation de Sabine permet de calculer le temps de rÃ©verbÃ©ration d'une salle Ã  partir de son volume et du coefficient d'absorption de ses matÃ©riaux.

$$RT_{60} = 0.1611 \times \frac{V}{\sum_{i=0}^{k} S_i.\alpha_i}$$

$V$ s'exprime en $m^3$ et $S$ en $m^2$. $\alpha$ est le coefficient d'absorption du matÃ©riau, en sabins. Ce coefficient est compris entre 0 et 1, plus il est important plus le matÃ©riau est absorbant.

En guise d'exemple sur l'utilisation de la formule ci-dessus, prenons le cas d'une piÃ¨ce de $25\,m^2$ ($5\,m$ par $5\,m$) et de $2.40\,m$ de hauteur. Nous considÃ©rons que le sol est en parquet et les murs en plÃ¢tre. Nous avons donc $25\,m^2$ de parquet et $4\times(5\times2.4)=48\,m^2$. On trouve sur les sites de fabricant de matÃ©riaux que le plÃ¢tre peint a un coefficient d'absorption de 0.05 sabins et le bois un coefficient de 0.15 sabins. Notre calcul final.

$$RT_{60} = 0.1611 \times \frac{25 \times 2.4}{25\times0.15+48\times0.05} \approx 1.57\,s$$

On peut dÃ¨s lors calculer la **distance critique**, distance Ã  partir de laquelle on entendra autant un Ã©vÃ¨nement sonore que la rÃ©ponse acoustique de la salle Ã  son stimulus.

$$d_c \approx 0.057 \times \sqrt{\frac{V}{RT60}}$$

Dans notre exemple $d_c \approx 0.35\,m$.

Il est souvent considÃ©rÃ© que la taille de la piÃ¨ce joue un rÃ´le dÃ©terminant sur la longueur de rÃ©verbÃ©ration. L'Ã©quation de Sabine indique bien que le coefficient d'absorption des matÃ©riaux y joue un rÃ´le beaucoup plus important. Le modÃ¨le de rÃ©verbÃ©ration de l'IRCAM va jusqu'Ã  complÃ¨tement dÃ©corrÃ©ler la taille de la piÃ¨ce simulÃ©e du temps de rÃ©verbÃ©ration. Au final, la taille de l'espace joue davantage sur la structure temporelle des Ã©chos, et donc, principalement sur les premiÃ¨res rÃ©flexions.

### Limite de l'Ã©quation de Sabine

Il convient d'observer plusieurs rÃ©serves quant Ã  l'utilisation de l'Ã©quation de Sabine. PremiÃ¨rement, elle ne tient pas compte de l'aspect frÃ©quentiel liÃ© Ã  l'absorption des matÃ©riaux. En effet, le temps de rÃ©verbÃ©ration des graves est presque toujours plus long que celui des aigus. Afin de contourner ce problÃ¨me, on pourra chercher des coefficients d'absorption tenant compte de la frÃ©quence et ainsi rÃ©soudre l'Ã©quation de Sabine pour certaines plages frÃ©quentielles.

L'Ã©quation de Sabine pose Ã©galement problÃ¨me pour de petits espaces (rÃ©gie d'Ã©coute par exemple) en prÃ©disant un temps de rÃ©verbÃ©ration trop long. Dans ce cas, l'Ã©quation d'Eyring est plus adaptÃ©e.

$$RT_{60} = -0.1611 \times \frac{V}{\sum_{i=0}^{k} S_i.\ln(1-\alpha_i)}$$

> ğŸ’¡ l'Ã©quation d'Eyring n'amÃ©liore pas non plus la problÃ©matique frÃ©quentielle.

### Le phÃ©nomÃ¨ne d'onde stationnaire

La plupart des piÃ¨ces de vie sont des salles rectangulaires. Dans ce cas, les surfaces sont toutes parallÃ¨les. Ce type de salle est particuliÃ¨rement propice Ã  l'apparition d'ondes stationnaires. Une onde stationnaire est un phÃ©nomÃ¨ne acoustique provoquant l'augmentation de volume de certaines frÃ©quences (ventre) et la disparition d'autres (nÅ“uds).

Nous aborderons ici ce  phÃ©nomÃ¨ne sous l'angle de l'acoustique des salles, mais il est applicable dans d'autres situations, comme la vibration d'une corde par exemple.

```{r, echo = FALSE, fig.align='center', fig.cap = 'Les points rouges reprÃ©sente les noeuds, les amplitudes maximales sont les ventres. Infographie par Lucas Vieira'}
knitr::include_graphics(rep("https://upload.wikimedia.org/wikipedia/commons/7/7d/Standing_wave_2.gif"))
```

Il est possible de calculer les frÃ©quences d'un mode grÃ¢ce aux formules vues au chapitre prÃ©cÃ©dent :

$$f(n) = \frac{c}{2L}.n$$
oÃ¹ $c=340\,m.s^{-1}$, $L$ est la longueur considÃ©rÃ©e de la piÃ¨ce. Pour $n=1$ on trouve le **mode propre**. Pour $n>1$ on trouvera tous les **modes harmoniques**.

Ã‰tudions la frÃ©quence du mode propre pour deux cas thÃ©oriques : une salle de 16 mÂ² (4x4) et une autre de 49 mÂ² (7x7). On trouvera donc :

$$f(1)_{L=4m} = 42.5 \,Hz \>\>\>\> f(1)_{L=7m} = 24 \,Hz$$

On en dÃ©duit donc que, plus la piÃ¨ce est grande, plus la frÃ©quence des modes propres sera grave. Il convient Ã©galement de considÃ©rer la distance de chaque surface parallÃ¨le, car les piÃ¨ces sont rarement cubiques. Cela implique donc la prÃ©sence de trois modes propres, plus leurs modes harmoniques, pour une seule et mÃªme salle.

## PremiÃ¨res rÃ©flexions et filtre en peigne

Nous avons vu que la rÃ©ponse acoustique, ou rÃ©verbÃ©ration, d'une salle se dÃ©compose gÃ©nÃ©ralement en deux parties, la premiÃ¨re Ã©tant les premiÃ¨res rÃ©flexions. Ces premiÃ¨res rÃ©flexions sont donc, comme leur nom l'indique, les premiers rebonds que nous entendons suite Ã  un Ã©vÃ¨nement sonore.

Dans de petites piÃ¨ces, les premiÃ¨res rÃ©flexions peuvent Ãªtre entendues si proche du son direct que cela gÃ©nÃ¨re un type de filtrage bien particulier appelÃ© **filtre en peigne**.

```{python, echo=FALSE, fig.align="center", fig.caption="Filtre en peigne correspondant Ã  un retard d'une milliseconde"}
import matplotlib.pyplot as plt
import numpy as np

fs = 48000  # Sample rate
T = 1/fs    # Sample period
L = 48    # Delay
a = 1     # Attenuation factor

# h[n] = dirac[n] + a * dirac[n-L]
h = np.zeros(fs)
h[0] = 1
h[L] = a

# Transfer function H via FFT - same # of bins
H_FFT = 20*np.log10(np.fft.fft(h, fs))

plt.figure()
var = plt.xlim(20,20000)
var = plt.ylim(-94,24)
var = 0
plt.xscale("log")
plt.xlabel("Frequences (Hz)")
plt.ylabel("Amplitude (dB)")
plt.title("Filtre en peigne correspondant Ã  un retard d'une milliseconde")
plt.plot(H_FFT)
```

Toujours en utilisant les formules dÃ©finies au premier chapitre, on Ã©tablit la relation suivante :

$$ fc = \frac 1{2t} = \frac c{2d} $$

OÃ¹ $fc$ correspond Ã  la frÃ©quence d'annulation la plus grave du filtre en peigne. Les autres frÃ©quences se calculent grÃ¢ce Ã  la relation $f(n) = fc*n$. Le phÃ©nomÃ¨ne de filtre en peigne est donc Ã©galement harmonique.

Ainsi, on peut calculer les filtres en peignes prÃ©sents au point d'Ã©coute d'une rÃ©gie de mixage ou de prise de son grÃ¢ce Ã  la mesure du chemin des premiÃ¨res rÃ©flexions.

```{r, echo = FALSE, fig.align='center', fig.cap = "Ensemble des premiÃ¨res reflexions entendues par une oreille pour une enceinte (hors plafond et plancher/bureau)."}
knitr::include_graphics(rep("_resources/drawings/roomPr.svg"))
```

> ğŸ’¡ La rÃ©flexion du son sur une paroi est tout Ã  fait comparable Ã  de l'optique gÃ©omÃ©trique. Une onde sonore arrivant avec un angle d'incidence $\alpha$ sur une surface sera rÃ©flÃ©chie avec le mÃªme angle. Ainsi, il est souvent conseillÃ© d'utiliser un miroir lorsque l'on positionne des traitements acoustiques. Lorsque la personne assise au point d'Ã©coute voit une enceinte dans un miroir placÃ© sur un mur, on sait alors qu'il faudra placer le panneau Ã  la place du miroir.

On se rend donc compte que l'influence des filtres en peigne gÃ©nÃ©rÃ©s par les premiÃ¨res rÃ©flexions est trÃ¨s importante. Ce phÃ©nomÃ¨ne Ã  lui seul explique l'intÃ©rÃªt d'une grande rÃ©gie d'Ã©coute. En effet, plus une piÃ¨ce est grande, plus l'Ã©cart de temps entre le son direct et les premiÃ¨res rÃ©flexions est important. Cela implique deux choses :

+ Notre cerveau favorisera le son direct plus facilement (effet de prÃ©cÃ©dence)
+ Ã€ partir d'une certaine taille, l'effet du filtre en peigne se mue en information d'acoustique pour notre cerveau. Au-delÃ  de 40 ms (trajet d'une premiÃ¨re rÃ©flexion d'environ 14 m), l'Ã©cart entre le son direct et les premiÃ¨res rÃ©flexions est tel que nous entendons un Ã©cho (effet Haas). 

Afin de rÃ©duire au maximum les effets des filtres en peignes, il est recommandÃ© de placer des traitements aux points de rÃ©flexion critique par rapport Ã  la position d'Ã©coute (voir schÃ©ma ci-dessus).

```{python, echo=FALSE, fig.align="center", fig.caption="Filtre en peigne correspondant Ã  un retard d'une milliseconde"}
import matplotlib.pyplot as plt
import numpy as np

fs = 48000  # Sample rate
T = 1/fs    # Sample period
L = 48    # Delay
a = 0.22     # Attenuation factor

# h[n] = dirac[n] + a * dirac[n-L]
h = np.zeros(fs)
h[0] = 1
h[L] = a

# Transfer function H via FFT - same # of bins
H_FFT = 20*np.log10(np.fft.fft(h, fs))

plt.figure()
var = plt.xlim(20,20000)
var = plt.ylim(-144,24)
var = 0
plt.xscale("log")
plt.xlabel("Frequences (Hz)")
plt.ylabel("Amplitude (dB)")
plt.title("MÃªme filtre en peigne, avec une attÃ©nuation de 20 dB sur la reflexion")
plt.plot(H_FFT)
```


## Traitement acoustique

GrÃ¢ce aux diffÃ©rents points abordÃ©s ci-dessus, nous avons maintenant bien l'idÃ©e que lâ€™acoustique dâ€™un lieu est un des facteurs les plus dÃ©terminants sur le rendu sonore. Mais câ€™est aussi celui sur lequel il est plus difficile et technique dâ€™intervenir.

On favorisera au maximum une architecture optimisÃ©e pour l'acoustique. Dans ce but, il convient de n'avoir aucune surface parallÃ¨le, cela permettant de grandement limiter l'apparition d'ondes stationnaires. On choisira Ã©galement des matÃ©riaux avec des propriÃ©tÃ©s acoustiques intÃ©ressantes (plÃ¢tre et carrelage sont Ã  proscrire, au profit du bois par exemple).

On se posera ensuite la question des endroits de la piÃ¨ce les plus propices pour y positionner un Ã©vÃ¨nement sonore (enceinte, musicien, etc.). On cherchera donc un point oÃ¹ la contribution des diffÃ©rents modes semble Ã©quilibrÃ©e. Pour cela, il suffit de se munir d'une enceinte et d'y diffuser une musique ou un signal test qui nous est familier. En dÃ©plaÃ§ant l'enceinte, on pourra Ã©valuer la contribution acoustique de la piÃ¨ce en diffÃ©rents points.

Une fois ces considÃ©rations prises en compte, on pourra alors aborder le traitement de l'acoustique.

> ğŸ›‘ Il ne faut pas confondre isolation acoustique et traitement acoustique. Dans le premier cas, on chercher a limiter la contribution sonore d'un lieu sur son environnement, dans l'autre on cherche Ã  amÃ©liorer la propagation du son dans un espace donnÃ©. Une isolation acoustique satisfaisante nÃ©cessite de lourds travaux, voire l'amÃ©nagement d'une "boÃ®te dans une boÃ®te". Ces notions d'acoustiques dÃ©passent le cadre de ce cours. 

### Les types de traitements

On trouve, en gÃ©nÃ©ral, deux types de traitementsÂ :

+ Les absorbeurs, qui rÃ©duisent lâ€™Ã©nergie dâ€™une onde sonore Ã  son impact.
+ Les diffuseurs, qui rÃ©partissent lâ€™Ã©nergie dâ€™une onde sonore dans lâ€™espace.

Dans un lieu oÃ¹ la quantitÃ© de rÃ©verbÃ©ration est jugÃ©e trop importante, on utilisera des absorbeurs. Ã€ lâ€™inverse, dans un lieu oÃ¹ lâ€™on souhaite prÃ©server la quantitÃ© de rÃ©verbÃ©ration, mais en Ã©vitant les phÃ©nomÃ¨nes de modes ou de filtre en peignes, on utilisera des diffuseurs.

Dans de petits lieux, lâ€™usage de diffuseur semble contre-productif, la prioritÃ© Ã©tant dâ€™absorber au maximum les premiÃ¨res rÃ©flexions, celle-ci arrivant trÃ¨s rapidement aprÃ¨s lâ€™Ã©mission du son direct.

### ConsidÃ©ration dâ€™acoustique pour le travail de son

Il est vivement recommandÃ© dâ€™installer un studio, de prise de son ou de monitoring, dans un lieu plutÃ´t grand. En effet, plus le lieu est grand, plus il sera facile de positionner un point de prise de son ou dâ€™Ã©coute suffisamment Ã©loignÃ© des parois afin de minimiser lâ€™influence des premiÃ¨res rÃ©flexions. Aussi, plus le lieu est grand, plus lâ€™espace y sera suffisant pour installer des traitements acoustiques. Certains types de traitements, comme les basstraps, peuvent prendre une place bien trop importante pour Ãªtre installÃ©e dans des piÃ¨ces de dimension habituelle (chambres, bureau, etc.). On se rappellera aussi de choisir une piÃ¨ce de travail avec le minimum de surface parallÃ¨le, afin de limiter les ondes stationnaires.

En ce qui concerne les traitements en eux-mÃªmes, il est vivement recommandÃ© de traiter en prioritÃ© le bas du spectre. Lâ€™ajout de basstrap est donc prioritaire sur le reste des traitements. Plus la longueur dâ€™onde Ã  traiter est grande (donc la frÃ©quence grave), plus la taille des matÃ©riaux devra Ãªtre importante. On retrouve donc le point abordÃ© prÃ©cÃ©demmentÂ : traiter une piÃ¨ce correctement, demande un certain espace. Par ailleurs, il est important que les traitements appliquÃ©s Ã  un lieu soient linÃ©aires en frÃ©quence, câ€™est-Ã -dire quâ€™il ne se concentre pas sur une seule zone du spectre. Cela arrive souvent avec les kits de mousses peu onÃ©reux, mais nâ€™ayant une rÃ©elle efficacitÃ© que dans les mÃ©diums et hautes frÃ©quences.

Pour une rÃ©gie d'Ã©coute, on sera tentÃ© de privilÃ©gier des traitements d'absorption. En effet, une rÃ©verbÃ©ration trop longue dans une rÃ©gie de monitoring risque fort de fausser certaines prises de dÃ©cisions (distance des microphones Ã  la source, quantitÃ© de rÃ©verbÃ©ration, etc.). Ã€ l'inverse, une piÃ¨ce avec un temps de rÃ©verbÃ©ration trop court pourra crÃ©er un sentiment d'inconfort, voire de malaise.

Pour une salle de prise de son, l'idÃ©al est de disposer d'un grand espace avec un traitement acoustique principalement basÃ© sur de la diffusion, pour ensuite disposer de traitements absorbants amovibles permettant de sculpter le rendu acoustique en fonction de la prise de son Ã  rÃ©aliser. Pour des petits lieux (- de 25 mÂ²), on cherchera Ã  absorber au maximum afin de limiter les effets de filtre en peigne.